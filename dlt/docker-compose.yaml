version: "2"

networks:
  byfn:

volumes:
  orderer.example.com:
  peer0.org1.example.com:
  peer1.org1.example.com:
  peer0.org2.example.com:
  peer1.org2.example.com:

services:
  orderer.example.com:
    container_name: orderer.example.com
    extends:
      file: base.yaml
      service: orderer-base
    environment:
      - ORDERER_GENERAL_LOGLEVEL=debug
      - ORDERER_GENERAL_LISTENADDRESS=0.0.0.0
      - ORDERER_GENERAL_GENESISMETHOD=file
      - ORDERER_GENERAL_GENESISFILE=/var/hyperledger/orderer/orderer.genesis.block
      - ORDERER_GENERAL_LOCALMSPID=OrdererMSP
      - ORDERER_GENERAL_LOCALMSPDIR=/var/hyperledger/orderer/msp
      - ORDERER_GENERAL_TLS_ENABLED=true
      - ORDERER_GENERAL_TLS_PRIVATEKEY=/var/hyperledger/orderer/tls/server.key
      - ORDERER_GENERAL_TLS_CERTIFICATE=/var/hyperledger/orderer/tls/server.crt
      - ORDERER_GENERAL_TLS_ROOTCAS=[/var/hyperledger/orderer/tls/ca.crt]
      - ORDERER_GENERAL_LISTENPORT=7050

  peer0.org1.example.com:
    container_name: peer0.org1.example.com
    extends:
      file: base.yaml
      service: peer-base
    environment:
      - CORE_PEER_ID=peer0.org1.example.com
      - CORE_PEER_ADDRESS=peer0.org1.example.com:7051
      - CORE_PEER_GOSSIP_EXTERNALENDPOINT=peer0.org1.example.com:7051
      - CORE_PEER_LOCALMSPID=Org1MSP
      - CORE_PEER_MSPCONFIGPATH=/var/hyperledger/peer/msp
      - CORE_PEER_GOSSIP_BOOTSTRAP=peer1.org1.example.com:7051
      - CORE_PEER_GOSSIP_ORGLEADER=false
      - CORE_PEER_PROFILE_ENABLED=true
      - CORE_PEER_TLS_ENABLED=true
      - CORE_PEER_TLS_CERT_FILE=/var/hyperledger/peer/tls/server.crt
      - CORE_PEER_TLS_KEY_FILE=/var/hyperledger/peer/tls/server.key
      - CORE_PEER_TLS_ROOTCERT_FILE=/var/hyperledger/peer/tls/ca.crt
      - CORE_PEER_GOSSIP_USELEADERELECTION=true
      - CORE_PEER_GOSSIP_ORG_LEADER=false
      - CORE_PEER_GOSSIP_SKIPHANDSHAKE=false
      - CORE_PEER_GOSSIP_STRATEGY=PERSISTENT_PEERS
      - CORE_PEER_GOSSIP_PERSISTENTPEERS=peer1.org1.example.com:7051
      - CORE_PEER_GOSSIP_FAILURE_STRATEGY=warn
      - CORE_PEER_GOSSIP_LOGLEVEL=debug
      - CORE_PEER_GOSSIP_CLEANUP_INTERVAL=15m
      - CORE_PEER_GOSSIP_MAX_PEERS=5
      - CORE_PEER_GOSSIP_MAX_MESSAGE_COUNT=100
      - CORE_PEER_GOSSIP_MAX_MESSAGE_SIZE=10485760
      - CORE_PEER_GOSSIP_BROADCAST_INTERVAL=5s
      - CORE_PEER_GOSSIP_MAX_QUEUE_SIZE=1000
      - CORE_PEER_GOSSIP_MAX_QUEUE_DROP=100
      - CORE_PEER_GOSSIP_RANGE=500
      - CORE_PEER_GOSSIP_RECONNECT_INTERVAL=5s
      - CORE_PEER_GOSSIP_RECONNECT_TIMEOUT=10s
      - CORE_PEER_GOSSIP_SKIPHANDSHAKE=false
      - CORE_PEER_GOSSIP_SKIPPEERPROPOSAL=false
      - CORE_PEER_GOSSIP_SKIPPEERVALIDATION=false
      - CORE_PEER_GOSSIP_USELEADERELECTION=true
      - CORE_PEER_GOSSIP_ORG_LEADER=false
      - CORE_PEER_GOSSIP_SKIPHANDSHAKE=false
      - CORE_PEER_GOSSIP_CLEANUP_INTERVAL=15m
      - CORE_PEER_GOSSIP_MAX_PEERS=5
      - CORE_PEER_GOSSIP_MAX_MESSAGE_COUNT=100
      - CORE_PEER_GOSSIP_MAX_MESSAGE_SIZE=10485760
      - CORE_PEER_GOSSIP_BROADCAST_INTERVAL=5s
      - CORE_PEER_GOSSIP_MAX_QUEUE_SIZE=1000
      - CORE_PEER_GOSSIP_MAX_QUEUE_DROP=100
      - CORE_PEER_GOSSIP_RANGE=500
      - CORE_PEER_GOSSIP_RECONNECT_INTERVAL=5s
      - CORE_PEER_GOSSIP_RECONNECT_TIMEOUT=10s
      - CORE_PEER_GOSSIP_SKIPHANDSHAKE=false
      - CORE_PEER_GOSSIP_SKIPPEERPROPOSAL=false
      - CORE_PEER_GOSSIP_SKIPPEERVALIDATION=false
      - CORE_PEER_GOSSIP_USELEADERELECTION=true
      - CORE_PEER_GOSSIP_ORG_LEADER=false
      - CORE_PEER_GOSSIP_SKIPHANDSHAKE=false
      - CORE_PEER_GOSSIP_CLEANUP_INTERVAL=15m
      - CORE_PEER_GOSSIP_MAX_PEERS=5
      - CORE_PEER_GOSSIP_MAX_MESSAGE_COUNT=100
      - CORE_PEER_GOSSIP_MAX_MESSAGE_SIZE=10485760
      - CORE_PEER_GOSSIP_BROADCAST_INTERVAL=5s
      - CORE_PEER_GOSSIP_MAX_QUEUE_SIZE=1000
      - CORE_PEER_GOSSIP_MAX_QUEUE_DROP=100
      - CORE_PEER_GOSSIP_RANGE=500
      - CORE_PEER_GOSSIP_RECONNECT_INTERVAL=5s
      - CORE_PEER_GOSSIP_RECONNECT_TIMEOUT=10s
      - CORE_PEER_GOSSIP_SKIPHANDSHAKE=false
      - CORE_PEER_GOSSIP_SKIPPEERPROPOSAL=false
      - CORE_PEER_GOSSIP_SKIPPEERVALIDATION=false
      - CORE_PEER_GOSSIP_USELEADERELECTION=true
      - CORE_PEER_GOSSIP_ORG_LEADER=false
      - CORE_PEER_GOSSIP_SKIPHANDSHAKE=false
      - CORE_PEER_GOSSIP_CLEANUP_INTERVAL=15m
      - CORE_PEER_GOSSIP_MAX_PEERS=5
      - CORE_PEER_GOSSIP_MAX_MESSAGE_COUNT=100
      - CORE_PEER_GOSSIP_MAX_MESSAGE_SIZE=10485760
      - CORE_PEER_GOSSIP_BROADCAST_INTERVAL=5s
      - CORE_PEER_GOSSIP_MAX_QUEUE_SIZE=1000
      - CORE_PEER_GOSSIP_MAX_QUEUE_DROP=100
      - CORE_PEER_GOSSIP_RANGE=500
      - CORE_PEER_GOSSIP_RECONNECT_INTERVAL=5s
      - CORE_PEER_GOSSIP_RECONNECT_TIMEOUT=10s
      - CORE_PEER_GOSSIP_SKIPHANDSHAKE=false
      - CORE_PEER_GOSSIP_SKIPPEERPROPOSAL=false
      - CORE_PEER_GOSSIP_SKIPPEERVALIDATION=false
      - CORE_PEER_GOSSIP_USELEADERELECTION=true
      - CORE_PEER_GOSSIP_ORG_LEADER=false
      - CORE_PEER_GOSSIP_SKIPHANDSHAKE=false
      - CORE_PEER_GOSSIP_CLEANUP_INTERVAL=15m
      - CORE_PEER_GOSSIP_MAX_PEERS=5
      - CORE_PEER_GOSSIP_MAX_MESSAGE_COUNT=100
      - CORE_PEER_GOSSIP_MAX_MESSAGE_SIZE=10485760
      - CORE_PEER_GOSSIP_BROADCAST_INTERVAL=5s
      - CORE_PEER_GOSSIP_MAX_QUEUE_SIZE=1000
      - CORE_PEER_GOSSIP_MAX_MESSAGE_COUNT=100
      - CORE_PEER_GOSSIP_MAX_MESSAGE_SIZE=1048_GOSSIP_MAX_QUEUE_DROP=100
      - CO5760
      - CORE_PEER_GOSSIP_BROADCAST_INTERVALRE_PEER_GOSSIP_RANGE=500
      - CORE_PEER_GOSS=5s
      - CORE_PEER_GOSSIP_MAX_QUEUE_SIZE=1IP_RECONNECT_INTERVAL=5s
      - CORE_PEER_GOSS000
      - CORE_PEER_GOSSIP_MAX_QUEUEIP_RECONNECT_TIMEOUT=10s
      - CORE_PE_DROP=100
      - CORE_PEER_GOSSIP_RANGE=5ER_GOSSIP_SKIPHANDSHAKE=false
      - CORE_PEER_00
      - CORE_PEER_GOSSIP_RECONNECTGOSSIP_SKIPPEERPROPOSAL=false
      - CORE_PEER_INTERVAL=5s
      - CORE_PEER_GOSSIP_RECONNECT_TIMEOUT_GOSSIP_SKIPPEERVALIDATION=false
      - CORE_PEER_GOSS=10s
      - CORE_PEER_GOSSIP_IP_USELEADERELECTION=true
      - CORE_PEERSKIPHANDSHAKE=false
      - CORE_PEER_GO_GOSSIP_ORG_LEADER=false
      - CORE_SSIP_SKIPPEERPROPOSAL=false
      - CORE_PEPEER_GOSSIPER_GOSSIP_SKIPPEERVALIDATION=false
      - CORE_PEER_GOSSIP_USELEADERELECTION=true
      - CORE_PEER_GOSSIP_ORG_LEADER=false
      - CORE_PEER_GOSSIP_SKIPHANDSHAKE=false
      - CORE_PEER_GOSSIP_CLEANUP_INTERVAL=15m
      - CORE_PEER_GOSSIP_MAX_PEERS=5
      - CORE_PEER_GOSSIP_MAX_MESSAGE_COUNT=100
      - CORE_PEER_GOSSIP_MAX_MESSAGE_SIZE=10485760
      - CORE_PEER_GOSSIP_BROADCAST_INTERVAL=5s
      - CORE_PEER_GOSSIP_MAX_QUEUE_SIZE=1000
      - CORE_PEER_GOSSIP_MAX_QUEUE_DROP=100
      - CORE_PEER_GOSSIP_RANGE=500
      - CORE_PEER_GOSSIP_RECONNECT_INTERVAL=5s
      - CORE_PEER_GOSSIP_RECONNECT_TIMEOUT=10s
      - CORE_PEER_GOSSIP_SKIPHANDSHAKE=false
      - CORE_PEER_GOSSIP_SKIPPEERPROPOSAL=false
      - CORE_PEER_GOSSIP_SKIPPEERVALIDATION=false
      - CORE_PEER_GOSSIP_USELEADERELECTION=true
      - CORE_PEER_GOSSIP_ORG_LEADER=false
      - CORE_PEER_GOSSIP_SKIPHANDSHAKE=false
      - CORE_PEER_GOSSIP_CLEANUP_INTERVAL=15m
      - CORE_PEER_GOSSIP_MAX_PEERS=5
      - CORE_PEER_GOSSIP_MAX_MESSAGE_COUNT=100
      - CORE_PEER_GOSSIP_MAX_MESSAGE_SIZE=10485760
      - CORE_PEER_GOSSIP_BROADCAST_INTERVAL=5s
      - CORE_PEER_GOSSIP_MAX_QUEUE_SIZE=1000
      - CORE_PEER_GOSSIP_MAX_QUEUE_DROP=100
      - CORE_PEER_GOSSIP_RANGE=500
      - CORE_PEER_GOSSIP_RECONNECT_INTERVAL=5s
      - CORE_PEER_GOSSIP_RECONNECT_TIMEOUT=10s
      - CORE_PEER_GOSSIP_SKIPHANDSHAKE=false
      - CORE_PEER_GOSSIP_SKIPPEERPROPOSAL=false
      - CORE_PEER_GOSSIP_SKIPPEERVALIDATION=false
      - CORE_PEER_GOSSIP_USELEADERELECTION=true
      - CORE_PEER_GOSSIP_ORG_LEADER=false
      - CORE_PEER_GOSSIP_SKIPHANDSHAKE=false
      - CORE_PEER_GOSSIP_CLEANUP_INTERVAL=15m
      - CORE_PEER_GOSSIP_MAX_PEERS=5
      - CORE_PEER_GOSSIP_MAX_MESSAGE_COUNT=100
      - CORE_PEER_GOSSIP_MAX_MESSAGE_SIZE=10485760
      - CORE_PEER_GOSSIP_BROADCAST_INTERVAL=5s
      - CORE_PEER_GOSSIP_MAX_QUEUE_SIZE=1000
      - CORE_PEER_GOSSIP_MAX_QUEUE_DROP=100
      - CORE_PEER_GOSSIP_RANGE=500
      - CORE_PEER_GOSSIP_RECONNECT_INTERVAL=5s
      - CORE_PEER_GOSSIP_RECONNECT_TIMEOUT=10s
      - CORE_PEER_GOSSIP_SKIPHANDSHAKE=false
      - CORE_PEER_GOSSIP_SKIPPEERPROPOSAL=false
      - CORE_PEER_GOSSIP_SKIPPEERVALIDATION=false
      - CORE_PEER_GOSSIP_USELEADERELECTION=true
      - CORE_PEER_GOSSIP_ORG_LEADER=false
      - CORE_PEER_GOSSIP_SKIPHANDSHAKE=false
      - CORE_PEER_GOSSIP_CLEANUP_INTERVAL=15m
      - CORE_PEER_GOSSIP_MAX_PEERS=5
      - CORE_PEER_GOSSIP_MAX_MESSAGE_COUNT=100
      - CORE_PEER_GOSSIP_MAX_MESSAGE_SIZE=10485760
      - CORE_PEER_GOSSIP_BROADCAST_INTERVAL=5s
      - CORE_PEER_GOSSIP_MAX_QUEUE_SIZE=1000
      - CORE_PEER_GOSSIP_MAX_QUEUE_DROP=100
      - CORE_PEER_GOSSIP_RANGE=500
      - CORE_PEER_GOSSIP_RECONNECT_INTERVAL=5s
      - CORE_PEER_GOSSIP_RECONNECT_TIMEOUT=10s
      - CORE_PEER_GOSSIP_SKIPHANDSHAKE=false
      - CORE_PEER_GOSSIP_SKIPPEERPROPOSAL=false
      - CORE_PEER_GOSSIP_SKIPPEERVALIDATION=false
      - CORE_PEER_GOSSIP_USELEADERELECTION=true
      - CORE_PEER_GOSSIP_ORG_LEADER=false
      - CORE_PEER_GOSSIP_SKIPHANDSHAKE=false
      - CORE_PEER_GOSSIP_CLEANUP_INTERVAL=15m
      - CORE_PEER_GOSSIP_MAX_PEERS=5
      - CORE_PEER_GOSSIP_MAX_MESSAGE_COUNT=100
      - CORE_PEER_GOSSIP_MAX_MESSAGE_SIZE=10485760
      - CORE_PEER_GOSSIP_BROADCAST_INTERVAL=5s
      - CORE_PEER_GOSSIP_MAX_QUEUE_SIZE=1000
      - CORE_PEER_GOSSIP_MAX_QUEUE_DROP=100
      - CORE_PEER_GOSSIP_RANGE=500
      - CORE_PEER_GOSSIP_RECONNECT_INTERVAL=5s
      - CORE_PEER_GOSSIP_RECONNECT_TIMEOUT=10s
      - CORE_PEER_GOSSIP_SKIPHANDSHAKE=false
      - CORE_PEER_GOSSIP_SKIPPEERPROPOSAL=false
      - CORE_PEER_GOSSIP_SKIPPEERVALIDATION=false
      - CORE_PEER_GOSSIP_USELEADERELECTION=true
      - CORE_PEER_GOSSIP_ORG_LEADER=false
      - CORE_PEER_GOSSIP_SKIPHANDSHAKE=false
      - CORE_PEER_GOSSIP_CLEANUP_INTERVAL=15m
      - CORE_PEER_GOSSIP_MAX_PEERS=5
      - CORE_PEER_GOSSIP_MAX_MESSAGE_COUNT=100
      - CORE_PEER_GOSSIP_MAX_MESSAGE_SIZE=10485760
      - CORE_PEER_GOSSIP_BROADCAST_INTERVAL=5s
      - CORE_PEER_GOSSIP_MAX_QUEUE_SIZE=1000
      - CORE_PEER_GOSSIP_MAX_QUEUE_DROP=100
      - CORE_PEER_GOSSIP_RANGE=500
      - CORE_PEER_GOSSIP_RECONNECT_INTERVAL=5s
      - CORE_PEER_GOSSIP_RECONNECT_TIMEOUT=10s
      - CORE_PEER_GOSSIP_SKIPHANDSHAKE=false
      - CORE_PEER_GOSSIP_SKIPPEERPROPOSAL=false
      - CORE_PEER_GOSSIP_SKIPPEERVALIDATION=false
      - CORE_PEER_GOSSIP_USELEADERELECTION=true
      - CORE_PEER_GOSSIP_ORG_LEADER=false
      - CORE_PEER_GOSSIP_SKIPHANDSHAKE=false
      - CORE_PEER_GOSSIP_CLEANUP_INTERVAL=15m
      - CORE_PEER_GOSSIP_MAX_PEERS=5
      - CORE_PEER_GOSSIP_MAX_MESSAGE_COUNT=100
      - CORE_PEER_GOSSIP_MAX_MESSAGE_SIZE=10485760
      - CORE_PEER_GOSSIP_BROADCAST_INTERVAL=5s
      - CORE_PEER_GOSSIP_MAX_QUEUE_SIZE=1000
      - CORE_PEER_GOSSIP_MAX_QUEUE_DROP=100
      - CORE_PEER_GOSSIP_RANGE=500
      - CORE_PEER_GOSSIP_RECONNECT_INTERVAL=5s
      - CORE_PEER_GOSSIP_RECONNECT_TIMEOUT=10s
      - CORE_PEER_GOSSIP_SKIPHANDSHAKE=false
      - CORE_PEER_GOSSIP_SKIPPEERPROPOSAL=false
      - CORE_PEER_GOSSIP_SKIPPEERVALIDATION=false
      - CORE_PEER_GOSSIP_USELEADERELECTION=true
      - CORE_PEER_GOSSIP_ORG_LEADER=false
      - CORE_PEER_GOSSIP_SKIPHANDSHAKE=false
      - CORE_PEER_GOSSIP_CLEANUP_INTERVAL=15m
      - CORE_PEER_GOSSIP_MAX_PEERS=5
      - CORE_PEER_GOSSIP_MAX_MESSAGE_COUNT=100
      - CORE_PEER_GOSSIP_MAX_MESSAGE_SIZE=10485760
      - CORE_PEER_GOSSIP_BROADCAST_INTERVAL=5s
      - CORE_PEER_GOSSIP_MAX_QUEUE_SIZE=1000
      - CORE_PEER_GOSSIP_MAX_QUEUE_DROP=100
      - CORE_PEER_GOSSIP_RANGE=500
      - CORE_PEER_GOSSIP_RECONNECT_INTERVAL=5s
      - CORE_PEER_GOSSIP_RECONNECT_TIMEOUT=10s
      - CORE_PEER_GOSSIP_SKIPHANDSHAKE=false
      - CORE_PEER_GOSSIP_SKIPPEERPROPOSAL=false
      - CORE_PEER_GOSSIP_SKIPPEERVALIDATION=false
      - CORE_PEER_GOSSIP_USELEADERELECTION=true
      - CORE_PEER_GOSSIP_ORG_LEADER=false
      - CORE_PEER_GOSSIP_SKIPHANDSHAKE=false
      - CORE_PEER_GOSSIP_CLEANUP_INTERVAL=15m
      - CORE_PEER_GOSSIP_MAX_PEERS=5
      - CORE_PEER_GOSSIP_MAX_MESSAGE_COUNT=100
      - CORE_PEER_GOSSIP_MAX_MESSAGE_SIZE=10485760
      - CORE_PEER_GOSSIP_BROADCAST_INTERVAL=5s
      - CORE_PEER_GOSSIP_MAX_QUEUE_SIZE=1000
      - CORE_PEER_GOSSIP_MAX_QUEUE_DROP=100
      - CORE_PEER_GOSSIP_RANGE=500
      - CORE_PEER_GOSSIP_RECONNECT_INTERVAL=5s
      - CORE_PEER_GOSSIP_RECONNECT_TIMEOUT=10s
      - CORE_PEER_GOSSIP_SKIPHANDSHAKE=false
      - CORE_PEER_GOSSIP_SKIPPEERPROPOSAL=false
      - CORE_PEER_GOSSIP_SKIPPEERVALIDATION=false
      - CORE_PEER_GOSSIP_USELEADERELECTION=true
      - CORE_PEER_GOSSIP_ORG_LEADER=false
      - CORE_PEER_GOSSIP_SKIPHANDSHAKE=false
      - CORE_PEER_GOSSIP_CLEANUP_INTERVAL=15m
      - CORE_PEER_GOSSIP_MAX_PEERS=5
      - CORE_PEER_GOSSIP_MAX_MESSAGE_COUNT=100
      - CORE_PEER_GOSSIP_MAX_MESSAGE_SIZE=10485760
      - CORE_PEER_GOSSIP_BROADCAST_INTERVAL=5s
      - CORE_PEER_GOSSIP_MAX_QUEUE_SIZE=1000
      - CORE_PEER_GOSSIP_MAX_QUEUE_DROP=100
      - CORE_PEER_GOSSIP_RANGE=500
      - CORE_PEER_GOSSIP_RECONNECT_INTERVAL=5s
      - CORE_PEER_GOSSIP_RECONNECT_TIMEOUT=10s
      - CORE_PEER_GOSSIP_SKIPHANDSHAKE=false
      - CORE_PEER_GOSSIP_SKIPPEERPROPOSAL=false
      - CORE_PEER_GOSSIP_SKIPPEERVALIDATION=false
      - CORE_PEER_GOSSIP_USELEADERELECTION=true
      - CORE_PEER_GOSSIP_ORG_LEADER=false
      - CORE_PEER_GOSSIP_SKIPHANDSHAKE=false
      - CORE_PEER_GOSSIP_CLEANUP_INTERVAL=15m
      - CORE_PEER_GOSSIP_MAX_PEERS=5
      - CORE_PEER_GOSSIP_MAX_MESSAGE_COUNT=100
      - CORE_PEER_GOSSIP_MAX_MESSAGE_SIZE=10485760
      - CORE_PEER_GOSSIP_BROADCAST_INTERVAL=5s
      - CORE_PEER_GOSSIP_MAX_QUEUE_SIZE=1000
      - CORE_PEER_GOSSIP_MAX_QUEUE_DROP=100
      - CORE_PEER_GOSSIP_RANGE=500
      - CORE_PEER_GOSSIP_RECONNECT_INTERVAL=5s
      - CORE_PEER_GOSSIP_RECONNECT_TIMEOUT=10s
      - CORE_PEER_GOSSIP_SKIPHANDSHAKE=false
      - CORE_PEER_GOSSIP_SKIPPEERPROPOSAL=false
      - CORE_PEER_GOSSIP_SKIPPEERVALIDATION=false
